<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" href="assets/css/style.css" />
    <title>Document</title>
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="col-sm-6 col-sm-offset-3">
          <form action="#" class="form">
            <h3>Basic example</h3>
            <input
              class="form-control"
              id="search-input"
              name="contacts"
              type="text"
              placeholder="Search..."
            />
          </form>
        </div>
      </div>
    </div>

    <!-- [ ... ] -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
    <script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.min.js"></script>
    <script type="text/javascript" src="config.js"></script>
    <script>
      const client = algoliasearch(
        config.APPLICATION_ID,
        config.SEARCH_ONLY_API_KEY
      );
      const index = client.initIndex('dev_DRINKS');
      autocomplete('#search-input', { hint: false }, [
        {
          source: autocomplete.sources.hits(index, { hitsPerPage: 5 }),
          displayKey: 'strDrink',
          templates: {
            suggestion: function(suggestion) {
              return suggestion._highlightResult.strDrink.value;
            }
          }
        }
      ]).on('autocomplete:selected', function(
        event,
        suggestion,
        dataset,
        context
      ) {
        console.log(event, suggestion, dataset, context);
      });

      //   $.get(
      //     'https://www.thecocktaildb.com/api/json/v1/1/filter.php?a=Alcoholic'
      //   ).then(res => {
      //     console.log(res.drinks);
      //     const client = algoliasearch(
      //       'UCOXRUYP7O',
      //       'aca19dc4d920761840550994a398685c'
      //     );
      //     const drinkArr = [];
      //     const index = client.initIndex('dev_DRINKS');
      // const drinkObj = res.drinks;
      //     // console.log('typeof', typeof drinkObj);
      //     // console.log('keys', Object.keys(drinkObj));
      //     // console.log("drinkObj['0']", drinkObj['0']);
      //     Object.keys(drinkObj).forEach(key => {
      //       drinkArr.push(drinkObj[key]);
      //     });
      //     // console.log('drinkArr', drinkArr);
      //     // console.log('typeof drinkArr', typeof drinkArr);
      // index.addObjects(drinkObj, (err, content) => {
      //   if (err) {
      //     console.error('err', err);
      //   }
      //   console.log(content);
      // });
      //     index.setSettings(
      //       {
      //         searchableAttributes: ['strDrink']
      //       },
      //       (err, content) => {
      //         console.log(content);
      //       }
      //     );
      //     autocomplete('#search-input', { hint: false }, [
      //       {
      //         source: autocomplete.sources.hits(index, { hitsPerPage: 5 }),
      //         displayKey: 'my_attribute',
      //         templates: {
      //           suggestion: function(suggestion) {
      //             return suggestion._highlightResult.my_attribute.value;
      //           }
      //         }
      //       }
      //     ]).on('autocomplete:selected', function(
      //       event,
      //       suggestion,
      //       dataset,
      //       context
      //     ) {
      //       console.log(event, suggestion, dataset, context);
      //     });
      //   });
    </script>
  </body>
</html>
